<p id="notice"><%= notice %></p>

<h1>Bookings</h1>

<table>
  <thead>
    <tr>
      <th>Court name</th>
      <th>Start time</th>
      <th>Duration</th>
      <th>Price</th>
      <th colspan="3"></th>
    </tr>
  </thead>



<table>
  <tbody>
    <% @bookings.each do |booking| %>
      <tr>
        <td><%= booking.court_name %></td>
        <td><%= booking.start_time %></td>
        <td><%= booking.duration %></td>
        <td><%= booking.price %></td>
        <td><%= link_to 'Show', booking %></td>
        <td><%= link_to 'Edit', edit_booking_path(booking) %></td>
        <td><%= link_to 'Destroy', booking, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
   
   
   <%= week_calendar events: @bookings do |date, bookings| %>
      <%= date %>
      <% (9..18).each do |h|%>
      <div>
        
    		<% if h < 12 %>
    			<%= h %> AM 
    		<% else %>
    			<%= h %> PM 
    		<% end %>
		
        <% bookings.each do |booking| %>
          <% if h.between?(booking.start_time.hour, (booking.start_time.hour + (booking.duration-1)))%> - Booked<% end %>
          <% if h == booking.start_time.hour%>
            <%= link_to 'Edit', edit_booking_path(booking) %>
            <%= link_to 'Cancel', booking, method: :delete, data: { confirm: 'Are you sure?' } %>
          <% end %>
        <% end %>
      </div>
      <% end %>
    <% end %>
    
  </tbody>
</table>

<br>

<%= link_to 'New Booking', new_booking_path %>
